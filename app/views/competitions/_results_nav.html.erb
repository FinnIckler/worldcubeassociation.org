<% content = capture do %>
  <%= react_component("CompetitionTabs/GeneralInfo", {
    competition: @competition.to_competition_overview_info(include_results: false),
    userInfo: current_user.as_json({
                                     only: %w[wca_id unconfirmed_wca_id],
                                     methods: [],
                                     include: [],
                                   }),
    winners: winners(@competition, @competition.main_event),
    records: records(@competition),
    media: @competition.media.accepted
  }) %>

  <% if @competition.user_can_view_results?(current_user) %>
    <% if !@competition.results_posted? %>
      <%= alert :warning, t('competitions.messages.results_preview_alert'), note: true %>
    <% end %>
    <%= yield %>
  <% end %>
<% end %>

<% if !defined?(layout_nav) || layout_nav %>
  <%= render layout: 'nav' do %>
    <%= content %>
  <% end %>
<% else %>
  <%= content %>
<% end %>
